
<!doctype html>
<html lang="zh" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="计算机图形学概论(graphicsbook)">
      
      
      
        <link rel="canonical" href="https://hellowac.github.io/graphicsbook-zh-cn/cn/c4/s2/">
      
      
        <link rel="prev" href="../s1/">
      
      
        <link rel="next" href="../s3/">
      
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.18">
    
    
      
        <title>4.2 OpenGL 1.1 中的光和材质 - 计算机图形学概论</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.66ac8b77.min.css">
      
        
        <link rel="stylesheet" href="../../../assets/stylesheets/palette.06af60db.min.css">
      
      

  
  
  
  
  <style>:root{--md-annotation-icon:url('data:image/svg+xml;charset=utf-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M22 12a10 10 0 0 1-10 10A10 10 0 0 1 2 12 10 10 0 0 1 12 2a10 10 0 0 1 10 10M6 13h8l-3.5 3.5 1.42 1.42L17.84 12l-5.92-5.92L10.5 7.5 14 11H6v2Z"/></svg>');}</style>


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
   <link href="../../../assets/stylesheets/glightbox.min.css" rel="stylesheet"/><style>
        html.glightbox-open { overflow: initial; height: 100%; }
        .gslide-title { margin-top: 0px; user-select: text; }
        .gslide-desc { color: #666; user-select: text; }
        .gslide-image img { background: white; }
        
            .gscrollbar-fixer { padding-right: 15px; }
            .gdesc-inner { font-size: 0.75rem; }
            body[data-md-color-scheme="slate"] .gdesc-inner { background: var(--md-default-bg-color);}
            body[data-md-color-scheme="slate"] .gslide-title { color: var(--md-default-fg-color);}
            body[data-md-color-scheme="slate"] .gslide-desc { color: var(--md-default-fg-color);}
            </style> <script src="../../../assets/javascripts/glightbox.min.js"></script></head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="default" data-md-color-accent="red">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#42-opengl-11-中的光和材质" class="md-skip">
          跳转至
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="页眉">
    <a href="../../.." title="计算机图形学概论" class="md-header__button md-logo" aria-label="计算机图形学概论" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            计算机图形学概论
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              4.2 OpenGL 1.1 中的光和材质
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
      <div class="md-header__option">
  <div class="md-select">
    
    <button class="md-header__button md-icon" aria-label="选择当前语言">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m12.87 15.07-2.54-2.51.03-.03A17.52 17.52 0 0 0 14.07 6H17V4h-7V2H8v2H1v2h11.17C11.5 7.92 10.44 9.75 9 11.35 8.07 10.32 7.3 9.19 6.69 8h-2c.73 1.63 1.73 3.17 2.98 4.56l-5.09 5.02L4 19l5-5 3.11 3.11.76-2.04M18.5 10h-2L12 22h2l1.12-3h4.75L21 22h2l-4.5-12m-2.62 7 1.62-4.33L19.12 17h-3.24Z"/></svg>
    </button>
    <div class="md-select__inner">
      <ul class="md-select__list">
        
          <li class="md-select__item">
            <a href="/graphicsbook-zh-cn/en/" hreflang="en" class="md-select__link">
              English
            </a>
          </li>
        
          <li class="md-select__item">
            <a href="/graphicsbook-zh-cn/cn/" hreflang="cn" class="md-select__link">
              中文
            </a>
          </li>
        
      </ul>
    </div>
  </div>
</div>
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="搜索" placeholder="搜索" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="查找">
        
        <button type="reset" class="md-search__icon md-icon" title="清空当前内容" aria-label="清空当前内容" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            正在初始化搜索引擎
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/hellowac/graphicsbook-zh-cn" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    graphicsbook
  </div>
</a>
      </div>
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="标签" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../" class="md-tabs__link">
        
  
    
  
  首页

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../preface/" class="md-tabs__link">
        
  
    
  
  前言

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c1/" class="md-tabs__link">
          
  
    
  
  1.简介

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c2/" class="md-tabs__link">
          
  
    
  
  2.二维图形

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c3/" class="md-tabs__link">
          
  
    
  
  3.几何

        </a>
      </li>
    
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../" class="md-tabs__link">
          
  
    
  
  4.灯光和材质

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c5/" class="md-tabs__link">
          
  
    
  
  5.three.js

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c6/" class="md-tabs__link">
          
  
    
  
  6.WebGL

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c7/" class="md-tabs__link">
          
  
    
  
  7.WebGL 3D

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c8/" class="md-tabs__link">
          
  
    
  
  8.高阶3D

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../c9/" class="md-tabs__link">
          
  
    
  
  9.WEBGPU

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../a1/" class="md-tabs__link">
          
  
    
  
  附录

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
    
  
  关于

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="导航栏" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="计算机图形学概论" class="md-nav__button md-logo" aria-label="计算机图形学概论" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    计算机图形学概论
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/hellowac/graphicsbook-zh-cn" title="前往仓库" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.5.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    graphicsbook
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    首页
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../preface/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    前言
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c1/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    1.简介
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_3" id="__nav_3_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            1.简介
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第 1 节 绘画与绘图
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第 2 节：三维(3D)图形的要素
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c1/s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第 3 节：硬件与软件
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c2/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    2.二维图形
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_4" id="__nav_4_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            2.二维图形
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第1节: 像素、坐标和颜色
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第2节: 形状
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第3节: 变换
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第4节: 分层建模
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第5节: Java 绘制2D
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第6节: HTML Canvas图形
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c2/s7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    第7节: SVG：一种场景描述语言
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c3/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    3.几何
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_5" id="__nav_5_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            3.几何
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.1 OpenGL 1.1 中的形状和颜色
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.2 3D 坐标和变换
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.3 投影与观看
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.4 多边形网格和 glDrawArrays
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.5 部分线性代数基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c3/s6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    3.6 使用 GLUT 和 JOGL
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" checked>
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    4.灯光和材质
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_6" id="__nav_6_label" tabindex="">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            4.灯光和材质
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.1 照明简介
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    4.2 OpenGL 1.1 中的光和材质
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    4.2 OpenGL 1.1 中的光和材质
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#421-应用材料" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.1 应用材料
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#422-定义法向量" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.2 定义法向量
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#423-应用灯光" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.3 应用灯光
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#424-全局光照属性" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.4 全局光照属性
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.3 图像纹理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../s4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    4.4 灯光、相机、动作
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c5/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    5.three.js
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_7" id="__nav_7_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            5.three.js
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.1 Three.js 基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.2 构建对象
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c5/s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    5.3 其他功能
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c6/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    6.WebGL
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_8" id="__nav_8_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            6.WebGL
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c6/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.1 可编程流水线
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c6/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.2 第一个例子
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c6/s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.3 GLSL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c6/s4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.4 图像纹理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c6/s5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    6.5 实现 2D 变换
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c7/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    7.WebGL 3D
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_9" id="__nav_9_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            7.WebGL 3D
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7.1 3D变换
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7.2 照明和材质
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7.3 纹理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7.4 帧缓冲区
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c7/s5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    7.5 WebGL 扩展
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_10" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c8/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    8.高阶3D
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_10" id="__nav_10_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_10_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_10">
            <span class="md-nav__icon md-icon"></span>
            8.高阶3D
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c8/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8.1 光线追踪
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c8/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    8.2 路径追踪
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_11" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../c9/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    9.WEBGPU
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_11" id="__nav_11_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_11_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_11">
            <span class="md-nav__icon md-icon"></span>
            9.WEBGPU
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c9/s1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.1 WebGPU 基础
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c9/s2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.2 实例和索引
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c9/s3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.3 WGSL
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c9/s4/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.4 WebGPU 中的 3D 图形
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c9/s5/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.5 纹理
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c9/s6/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.6 计算着色器
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../c9/s7/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    9.7 细节
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
      
        
          
        
      
        
      
        
      
        
      
        
      
    
    
      
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          
          <div class="md-nav__link md-nav__container">
            <a href="../../a1/" class="md-nav__link ">
              
  
  <span class="md-ellipsis">
    附录
  </span>
  

            </a>
            
              
              <label class="md-nav__link " for="__nav_12" id="__nav_12_label" tabindex="0">
                <span class="md-nav__icon md-icon"></span>
              </label>
            
          </div>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            附录
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../a2/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Blender 3D建模
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../a3/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Gimp和Inkscape
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../source/index.md" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    示例程序源代码
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    术语表
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    关于
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="目录">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      目录
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#421-应用材料" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.1 应用材料
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#422-定义法向量" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.2 定义法向量
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#423-应用灯光" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.3 应用灯光
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#424-全局光照属性" class="md-nav__link">
    <span class="md-ellipsis">
      4.2.4 全局光照属性
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="42-opengl-11-中的光和材质">4.2 <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> 1.1 中的光和材质<a class="headerlink" href="#42-opengl-11-中的光和材质" title="Permanent link">&para;</a></h1>
<p><strong>Light and Material in <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> 1.1</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:2"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">中文</label><label for="__tabbed_1_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>在本节中，我们将看到如何在OpenGL中使用光线和材质。本节讨论的函数特定于OpenGL的旧版本，并且不会直接应用到其他图形API。（但是它们实现的一般思想，如<a href="../s1/">上一节</a>所涵盖的，更具有普遍适用性。）</p>
<p>在OpenGL 1.1中，必须通过调用<em>glEnable(GL_LIGHTING)</em>来启用光线和材质的使用。当照明被禁用时，顶点的颜色仅仅是由<em>glColor</em>*设置的当前颜色。当照明被启用时，顶点的颜色是使用一个数学公式计算得出的，该公式考虑了场景的照明和之前讨论过的分配给顶点的材质属性。现在，是时候学习用于配置照明并将材质分配给对象的OpenGL命令了。</p>
<p>通常，照明在渲染场景的某些部分时被打开，而在渲染其他部分时被关闭。我们将说一些对象是“被照亮的”，而其他对象则不是。例如，即使它们是被照亮的实体对象场景的一部分，线框对象通常也是在照明被禁用的情况下绘制的。但请注意，在调用glBegin和glEnd之间调用<em>glEnable</em><em>或</em>glDisable<em>是非法的，因此不可能让同一原素的一部分被照亮，而另一部分</em>同一原素<em>不被照亮。（我应该注意，当照明被启用时，它也会应用于点和线原素以及多边形，尽管这样做很少有意义。）照明可以通过使用参数</em>GL_LIGHTING<em>调用</em>glEnable<em>和</em>glDisable*来启用和禁用。当照明被关闭时，其他光线和材质设置不需要修改，因为它们在照明被禁用时会被简单地忽略。</p>
<p>要照亮一个场景，除了启用<em>GL_LIGHTING</em>，你还需要配置至少一个光源。对于非常基础的照明，通常只需要调用</p>
<div class="highlight"><pre><span></span><code><span class="n">glEnable</span><span class="p">(</span><span class="n">GL_LIGHT0</span><span class="p">);</span>
</code></pre></div>
<p>这个命令会打开一个从观察者方向射入场景的方向光。（注意<em>GL_LIGHT0</em>中的最后一个字符是零。）由于它是从观察者的方向照射的，它会照亮用户能看到的所有东西。光线是白色的，没有镜面成分；也就是说，你将看到物体的散射颜色，没有任何镜面高光。我们将在本节后面看到如何改变这个光源的特性以及如何配置其他光源。但首先，我们将考虑材质和法向量。</p>
</div>
<div class="tabbed-block">
<p>In this section, we will see how to use light and <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> in <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr>. The functions that are discussed in this section are specific to older versions of <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr>, and will not carry over directly to other graphics APIs. (But the general ideas that they implement, which were covered in the <a href="../s1/">previous section</a> are more generally applicable.)</p>
<p>In <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> 1.1, the use of light and <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> must be enabled by calling <em>glEnable(GL_LIGHTING)</em>. When <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> is disabled, the color of a <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> is simply the current color as set by <em>glColor*</em>. When <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> is enabled, the color of a <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> is computed using a mathematical formula that takes into account the <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> of the scene and the <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> properties that have been assigned to the <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr>, as discussed in the previous section. Now it's time to learn about the <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> commands that are used to configure <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> and to assign materials to objects.</p>
<p>It is common for <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> to be turned on for <abbr title="The process of producing a 2D image from a 3D scene description.">rendering</abbr> some parts of a scene, but turned off for other parts. We will say that some objects are "lit" while others aren't. For example, <abbr title="A style of drawing a polyhedron or polygonal mesh in which only the edges are drawn, resulting in an image made up of line segments.">wireframe</abbr> objects are usually drawn with <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> disabled, even if they are part of a scene in which solid objects are lit. But note that it is illegal to call <em>glEnable</em> or <em>glDisable</em> between calls to glBegin and glEnd, so it is not possible for part of a primitive to be lit while another part <em>of the same primitive</em> is unlit. (I should note that when <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> is enabled, it is applied to point and line primitives as well as to polygons, even though it rarely makes sense to do so.) Lighting can be enabled and disabled by calling <em>glEnable</em> and <em>glDisable</em> with parameter <em>GL_LIGHTING</em>. Other light and <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> settings don't have to be modified when <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> is turned off, since they are simply ignored when <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> is disabled.</p>
<p>To light a scene, in addition to enabling <em>GL_LIGHTING</em>, you must configure at least one source of light. For very basic <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr>, it often suffices to call</p>
<div class="highlight"><pre><span></span><code><span class="n">glEnable</span><span class="p">(</span><span class="n">GL_LIGHT0</span><span class="p">);</span>
</code></pre></div>
<p>This command turns on a <abbr title="A light source whose light rays are parallel, all arriving from the same direction. Can be considered to be a light source at an effectively infinite distance. Also called a &quot;sun,&quot; since the Sun is an example of a directional light source.">directional light</abbr> that shines from the direction of the viewer into the scene. (Note that the last character in <em>GL_LIGHT0</em> is a zero.) Since it shines from the direction of the viewer, it will illuminate everything that the user can see. The light is white, with no specular component; that is, you will see the <abbr title="A material property that represents the proportion of incident light that is reflected diffusely from a surface.">diffuse color</abbr> of objects, without any specular highlights. We will see later in this section how to change the characteristics of this light source and how to configure additional sources. But first, we will consider materials and normal vectors.</p>
</div>
</div>
</div>
<h2 id="421-应用材料">4.2.1 应用材料<a class="headerlink" href="#421-应用材料" title="Permanent link">&para;</a></h2>
<p><strong>Working with Material</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">中文</label><label for="__tabbed_2_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>材质属性是顶点属性，就像颜色是顶点属性一样。也就是说，OpenGL状态包括每个材质属性的当前值。当顶点通过调用glVertex*函数生成时，会存储当前材质属性的每个副本，以及顶点坐标。当包含该顶点的原素被渲染时，与顶点关联的材质属性将与有关照明的信息一起使用，以计算顶点的颜色。</p>
<p>这被多边形是双面的事实复杂化了，多边形的前表面和后表面可以有不同的材质。这意味着，实际上，为每个顶点存储了两套材质属性值：前材质和后材质。（除非启用双面照明，否则实际上不会使用后材质，双面照明将在下面讨论。）</p>
<p>考虑到所有这些，我们将查看设置材质属性当前值的函数。对于设置环境、散射、镜面和自发光材质颜色，函数是：</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">glMaterialfv</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">side</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">*</span><span class="w"> </span><span class="n">valueArray</span><span class="p">)</span>
</code></pre></div>
<p>第一个参数可以是GL_FRONT_AND_BACK、GL_FRONT或GL_BACK。它告诉您是为前表面、后表面还是两者设置材质属性值。第二个参数告诉您正在设置哪个材质属性。它可以是GL_AMBIENT、GL_DIFFUSE、GL_SPECULAR、GL_EMISSION或GL_AMBIENT_AND_DIFFUSE。请注意，可以通过使用GL_AMBIENT_AND_DIFFUSE作为属性名称，用一次调用glMaterialfv来将环境和散射颜色设置为相同的值；这是最常见的情况。glMaterialfv的最后一个参数是一个包含四个浮点数的数组。这些数字给出RGBA颜色分量，作为0.0到1.0范围内的值；实际上允许超出此范围的值，并将用于照明计算，但这样的值是不寻常的。请注意，需要一个alpha分量，但仅在散射颜色的情况下使用：当计算顶点颜色时，其alpha分量设置为散射材质颜色的alpha分量。</p>
<p>光泽度材质属性是一个单一数字，而不是数组，并且有一个不同的函数来设置它的值（函数名末尾没有"v"）：</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">glMaterialf</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">side</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
<p>再次，side可以是GL_FRONT_AND_BACK、GL_FRONT或GL_BACK。property<strong>必须是</strong>GL_SHININESS。值是一个在0.0到128.0范围内的浮点数。</p>
<p>与glColor<em>和glVertex</em>的大量版本相比，设置材质的选项是有限的。特别是，不可能在没有定义数组来包含颜色分量值的情况下设置材质颜色。假设，例如，我们想要将环境和散射颜色设置为蓝绿色。在C语言中，这可能通过以下方式完成：</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="w"> </span><span class="n">bgcolor</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">};</span>
<span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_AMBIENT_AND_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">bgcolor</span><span class="p">);</span>
</code></pre></div>
<p>使用我的JavaScript OpenGL模拟器，这看起来像：</p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">bgcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">];</span>
<span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_AMBIENT_AND_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">bgcolor</span><span class="p">);</span>
</code></pre></div>
<p>在Java的JOGL API中，其中具有数组参数的方法有一个额外的参数，用于给出数组中数据的起始索引，它变成：</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="p">[]</span><span class="w"> </span><span class="n">bgcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">0.0F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.7F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5F</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0F</span><span class="p">};</span>
<span class="n">gl</span><span class="p">.</span><span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_AMBIENT_AND_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">bgcolor</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</code></pre></div>
<p>在C语言中，第三个参数实际上是一个指向浮点数的指针，这允许将多个材质属性的值存储在一个数组中的灵活性。假设，例如，我们有一个C数组：</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="w"> </span><span class="n">gold</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">0.24725</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1995</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0745</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">      </span><span class="cm">/* 环境 */</span>
<span class="w">                </span><span class="mf">0.75164</span><span class="p">,</span><span class="w"> </span><span class="mf">0.60648</span><span class="p">,</span><span class="w"> </span><span class="mf">0.22648</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">    </span><span class="cm">/* 散射 */</span>
<span class="w">                </span><span class="mf">0.628281</span><span class="p">,</span><span class="w"> </span><span class="mf">0.555802</span><span class="p">,</span><span class="w"> </span><span class="mf">0.366065</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="cm">/* 镜面 */</span>
<span class="w">                </span><span class="mf">50.0</span><span class="w">                               </span><span class="cm">/* 光泽度 */</span>
<span class="w">    </span><span class="p">};</span>
</code></pre></div>
<p>其中数组中前四个数字指定一个环境颜色；接下来的四个，一个散射颜色；再接下来的四个，一个镜面颜色；最后一个数字，一个光泽度指数。这个数组可以用来设置所有材质属性：</p>
<div class="highlight"><pre><span></span><code><span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_AMBIENT</span><span class="p">,</span><span class="w"> </span><span class="n">gold</span><span class="p">);</span>
<span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">gold</span><span class="p">[</span><span class="mi">4</span><span class="p">]);</span>
<span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_SPECULAR</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">gold</span><span class="p">[</span><span class="mi">8</span><span class="p">]);</span>
<span class="n">glMaterialf</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_SHININESS</span><span class="p">,</span><span class="w"> </span><span class="n">gold</span><span class="p">[</span><span class="mi">12</span><span class="p">]);</span>
</code></pre></div>
<p>请注意，最后一个函数是glMaterialf而不是glMaterialfv，它的第三个参数是一个数字而不是一个指针。在Java中也可以做类似的事情：</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="p">[]</span><span class="w"> </span><span class="n">gold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">0.24725F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1995F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0745F</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0F</span><span class="p">,</span><span class="w">      </span><span class="cm">/* 环境 */</span>
<span class="w">                </span><span class="mf">0.75164F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.60648F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.22648F</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0F</span><span class="p">,</span><span class="w">    </span><span class="cm">/* 散射 */</span>
<span class="w">                </span><span class="mf">0.628281F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.555802F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.366065F</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0F</span><span class="p">,</span><span class="w"> </span><span class="cm">/* 镜面 */</span>
<span class="w">                </span><span class="mf">50.0F</span><span class="w">                                  </span><span class="cm">/* 光泽度 */</span>
<span class="w">    </span><span class="p">};</span>

<span class="n">gl</span><span class="p">.</span><span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_AMBIENT</span><span class="p">,</span><span class="w"> </span><span class="n">gold</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
<span class="n">gl</span><span class="p">.</span><span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">gold</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">);</span>
<span class="n">gl</span><span class="p">.</span><span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_SPECULAR</span><span class="p">,</span><span class="w"> </span><span class="n">gold</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p">);</span>
<span class="n">gl</span><span class="p">.</span><span class="n">glMaterialf</span><span class="p">(</span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_SHININESS</span><span class="p">,</span><span class="w"> </span><span class="n">gold</span><span class="p">[</span><span class="mi">12</span><span class="p">]);</span>
</code></pre></div>
<p>glMaterialfv和glMaterialf函数可以在任何时候调用，包括在glBegin和glEnd调用之间。这意味着原素的不同顶点可以有不同的材质属性。</p>
<hr />
<p>所以，也许你更喜欢glColor*而不是glMaterialfv？如果是这样，你可以使用它来处理材质以及普通颜色。如果你调用：</p>
<div class="highlight"><pre><span></span><code><span class="n">glEnable</span><span class="p">(</span><span class="n">GL_COLOR_MATERIAL</span><span class="p">);</span>
</code></pre></div>
<p>那么一些材质颜色属性将跟踪颜色。默认情况下，设置颜色也将设置当前的前表面和后表面、环境和散射材质属性。也就是说，例如，调用：</p>
<div class="highlight"><pre><span></span><code><span class="n">glColor3f</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</code></pre></div>
<p>如果照明被启用，将具有与调用相同的效果：</p>
<div class="highlight"><pre><span></span><code><span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_AMBIENT_AND_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="p">);</span>
<span class="n">where</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">material</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">tracks</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">using</span>

<span class="err">```</span><span class="n">c</span>
<span class="kt">void</span><span class="w"> </span><span class="n">glColorMaterial</span><span class="p">(</span><span class="n">side</span><span class="p">,</span><span class="w"> </span><span class="n">property</span><span class="p">);</span>
</code></pre></div>
<p>其中side可以是GL_FRONT_AND_BACK、GL_FRONT或GL_BACK，property可以是GL_AMBIENT、GL_DIFFUSE、GL_SPECULAR、GL_EMISSION或GL_AMBIENT_AND_DIFFUSE。既不能在glBegin和glEnd调用之间调用glEnable，也不能调用glColorMaterial，因此原素的所有顶点必须使用相同的设置。</p>
<p>回想一下，当使用glDrawArrays或glDrawElements绘制原素时，原素的顶点的颜色值可以从颜色数组中获取，使用glColorPointer指定。（见<a href="../../c3/s4/#342-gldrawarrays和gldrawelements">3.4.2小节</a>。）没有类似的数组用于材质属性。然而，如果在使用glDrawArrays或glDrawElements时启用了照明，并且也启用了GL_COLOR_MATERIAL，那么颜色数组将被用作跟踪颜色的材质属性值的来源。</p>
</div>
<div class="tabbed-block">
<p>Material properties are <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> <abbr title="A property, such as color, of a graphical object. An image can be specified by the geometric shapes that it contains, together with their attributes.">attributes</abbr> in that same way that color is a <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> <abbr title="A property, such as color, of a graphical object. An image can be specified by the geometric shapes that it contains, together with their attributes.">attribute</abbr>. That is, the <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> state includes a current value for each of the <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> properties. When a <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> is generated by a call to one of the glVertex* functions, a copy of each of the current <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> properties is stored, along with the <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> coordinates. When a primitive that contains the <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> is rendered, the <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> properties that are associated with the <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> are used, along with information about <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr>, to compute a color for the <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr>.</p>
<p>This is complicated by the fact that polygons are two-sided, and the <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the front, the vertices are enumerated in counterclockwise order around the polygon.">front face</abbr> and <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the back, the vertices are enumerated in clockwise order around the polygon.">back face</abbr> of a <abbr title="A multi-sided shape lying in a plane and specified by a list of points, called its vertices, and made up of the line segments from each point in the list to the next point in the list, plus a line segment from the last point in the list to the first point. All the points are required to lie in the same plane. Sometimes the term &quot;polygon&quot; includes the interior of the shape as well as its boundary.">polygon</abbr> can have different materials. This means that, in fact, two sets of <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> property values are stored for each <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr>: the front <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> and the back <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr>. (The back <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> isn't actually used unless you turn on two-sided <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr>, which will be discussed below.)</p>
<p>With all that in mind, we will look at functions for setting the current values of <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> properties. For setting the ambient, diffuse, specular, and emission <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> colors, the function is</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">glMaterialfv</span><span class="p">(</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">side</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">*</span><span class="w"> </span><span class="n">valueArray</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>
<p>The first parameter can be <em>GL_FRONT_AND_BACK</em>, <em>GL_FRONT</em>, or <em>GL_BACK</em>. It tells whether you are setting a <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> property value for the <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the front, the vertices are enumerated in counterclockwise order around the polygon.">front face</abbr>, the <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the back, the vertices are enumerated in clockwise order around the polygon.">back face</abbr>, or both. The second parameter tells which <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> property is being set. It can be <em>GL_AMBIENT</em>, <em>GL_DIFFUSE</em>, <em>GL_SPECULAR</em>, <em>GL_EMISSION</em>, or <em>GL_AMBIENT_AND_DIFFUSE</em>. Note that it is possible to set the ambient and diffuse colors to the same value with one call to <em>glMaterialfv</em> by using <em>GL_AMBIENT_AND_DIFFUSE</em> as the property name; this is the most common case. The last parameter to <em>glMaterialfv</em> is an array containing four float numbers. The numbers give the <abbr title="An RGB color—specified by red, green, and blue component values—together with an alpha component. The alpha component is most often take to specify the degree of transparency of the color, with a maximal alpha value giving a fully opaque color.">RGBA color</abbr> components as values in the range from 0.0 to 1.0; values outside this range are actually allowed, and will be used in <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> computations, but such values are unusual. Note that an <abbr title="An extra component (that is, one of the numbers that are used to specify a color) in a color model that is not part of the actual color specification. The alpha component is extra information. It is most often used to specify the degree of transparency of a color.">alpha</abbr> component is required, but it is used only in the case of <abbr title="A material property that represents the proportion of incident light that is reflected diffusely from a surface.">diffuse color</abbr>: When the <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> color is computed, its <abbr title="An extra component (that is, one of the numbers that are used to specify a color) in a color model that is not part of the actual color specification. The alpha component is extra information. It is most often used to specify the degree of transparency of a color.">alpha</abbr> component is set equal to the <abbr title="An extra component (that is, one of the numbers that are used to specify a color) in a color model that is not part of the actual color specification. The alpha component is extra information. It is most often used to specify the degree of transparency of a color.">alpha</abbr> component of the diffuse <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> color.</p>
<p>The <abbr title="A material property that determines the size and sharpness of specular highlights. Also called the &quot;specular exponent&quot; because of the way it is used in lighting calculations. In OpenGL, shininess is a number in the range 0 to 128.">shininess</abbr> <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> property is a single number rather than an array, and there is a different function for setting its value (without the "v" at the end of the name):</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">glMaterialf</span><span class="p">(</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">side</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>
<p>Again, the <em>side</em> can be <em>GL_FRONT_AND_BACK</em>, <em>GL_FRONT</em>, or <em>GL_BACK</em>. The <em>property</em> <strong>must</strong> be <em>GL_SHININESS</em>. And the value is a float in the range 0.0 to 128.0.</p>
<p>Compared to the large number of versions of glColor<em> and glVertex</em>, the options for setting <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> are limited. In particular, it is not possible to set a <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> color without defining an array to contain the <abbr title="One of the numbers used in a color model to specify a color. For example, in the RGB color model, a color is specified by three color components representing the amounts of red, green, and blue in the color.">color component</abbr> values. Suppose for example that we want to set the ambient and diffuse colors to a bluish green. In C, that might be done with</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="w"> </span><span class="n">bgcolor</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">};</span>
<span class="n">glMaterialfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_AMBIENT_AND_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">bgcolor</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
<p>With my <abbr title="A programming language for web pages. JavaScript code on a web page is executed by a web browser that displays the page, and it can interact with the contents of the web page and with the user. There are JavaScript APIs for 2D and for 3D graphics">JavaScript</abbr> simulator for <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr>, this would look like</p>
<div class="highlight"><pre><span></span><code><span class="n">let</span><span class="w"> </span><span class="n">bgcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">[</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.7</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="w"> </span><span class="p">];</span>
<span class="n">glMaterialfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_AMBIENT_AND_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">bgcolor</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
<p>And in the <abbr title="OpenGL的Java实现。JOGL非常复杂，因为它试图在一个编程系统中支持所有版本的OpenGL。JOGL与Java的Swing和AWT图形无缝集成。">JOGL</abbr> <abbr title="Application Programming Interface. A collection of related classes, functions, constants, etc., for performing some task. An API is an &quot;interface&quot; in the sense that it can be used without understanding how its functionality is actually implemented.">API</abbr> for Java, where methods with array parameters have an additional parameter to give the starting index of the data in the array, it becomes</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="p">[]</span><span class="w"> </span><span class="n">bgcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">0.0F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.7F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.5F</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0F</span><span class="w"> </span><span class="p">};</span>
<span class="n">gl</span><span class="p">.</span><span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_AMBIENT_AND_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">bgcolor</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</code></pre></div>
<p>In C, the third parameter is actually a pointer to float, which allows the flexibility of storing the values for several <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> properties in one array. Suppose, for example, that we have a C array</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="w"> </span><span class="n">gold</span><span class="p">[</span><span class="mi">13</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">0.24725</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1995</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0745</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">      </span><span class="cm">/* ambient */</span>
<span class="w">                </span><span class="mf">0.75164</span><span class="p">,</span><span class="w"> </span><span class="mf">0.60648</span><span class="p">,</span><span class="w"> </span><span class="mf">0.22648</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w">    </span><span class="cm">/* diffuse */</span>
<span class="w">                </span><span class="mf">0.628281</span><span class="p">,</span><span class="w"> </span><span class="mf">0.555802</span><span class="p">,</span><span class="w"> </span><span class="mf">0.366065</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="cm">/* specular */</span>
<span class="w">                </span><span class="mf">50.0</span><span class="w">                               </span><span class="cm">/* shininess */</span>
<span class="w">    </span><span class="p">};</span>
</code></pre></div>
<p>where the first four numbers in the array specify an <abbr title="A material property that represents the proportion of ambient light in the environment that is reflected by a surface.">ambient color</abbr>; the next four, a <abbr title="A material property that represents the proportion of incident light that is reflected diffusely from a surface.">diffuse color</abbr>; the next four, a <abbr title="A material property that represents the proportion of incident light that is reflected specularly by a surface.">specular color</abbr>; and the last number, a <abbr title="A material property that determines the size and sharpness of specular highlights. Also called the &quot;specular exponent&quot; because of the way it is used in lighting calculations. In OpenGL, shininess is a number in the range 0 to 128.">shininess</abbr> exponent. This array can be used to set all the <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> properties:</p>
<div class="highlight"><pre><span></span><code><span class="n">glMaterialfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_AMBIENT</span><span class="p">,</span><span class="w"> </span><span class="n">gold</span><span class="w"> </span><span class="p">);</span>
<span class="n">glMaterialfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">gold</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="p">);</span>
<span class="n">glMaterialfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_SPECULAR</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">gold</span><span class="p">[</span><span class="mi">8</span><span class="p">]</span><span class="w"> </span><span class="p">);</span>
<span class="n">glMaterialf</span><span class="p">(</span><span class="w"> </span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_SHININESS</span><span class="p">,</span><span class="w"> </span><span class="n">gold</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
<p>Note that the last function is glMaterialf rather than glMaterialfv, and that its third parameter is a number rather than a pointer. Something similar can be done in Java with</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="p">[]</span><span class="w"> </span><span class="n">gold</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">0.24725F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.1995F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0745F</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0F</span><span class="p">,</span><span class="w">      </span><span class="cm">/* ambient */</span>
<span class="w">                </span><span class="mf">0.75164F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.60648F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.22648F</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0F</span><span class="p">,</span><span class="w">    </span><span class="cm">/* diffuse */</span>
<span class="w">                </span><span class="mf">0.628281F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.555802F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.366065F</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0F</span><span class="p">,</span><span class="w"> </span><span class="cm">/* specular */</span>
<span class="w">                </span><span class="mf">50.0F</span><span class="w">                                  </span><span class="cm">/* shininess */</span>
<span class="w">    </span><span class="p">};</span>

<span class="n">gl</span><span class="p">.</span><span class="n">glMaterialfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_AMBIENT</span><span class="p">,</span><span class="w"> </span><span class="n">gold</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">);</span>
<span class="n">gl</span><span class="p">.</span><span class="n">glMaterialfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">gold</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">);</span>
<span class="n">gl</span><span class="p">.</span><span class="n">glMaterialfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_SPECULAR</span><span class="p">,</span><span class="w"> </span><span class="n">gold</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="w"> </span><span class="p">);</span>
<span class="n">gl</span><span class="p">.</span><span class="n">glMaterialf</span><span class="p">(</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_SHININESS</span><span class="p">,</span><span class="w"> </span><span class="n">gold</span><span class="p">[</span><span class="mi">12</span><span class="p">]</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
<p>The functions <em>glMaterialfv</em> and <em>glMaterialf</em> can be called at any time, including between calls to glBegin and glEnd. This means that different vertices of a primitive can have different <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> properties.</p>
<hr />
<p>So, maybe you like glColor* better than glMaterialfv? If so, you can use it to work with <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> as well as regular color. If you call</p>
<div class="highlight"><pre><span></span><code><span class="n">glEnable</span><span class="p">(</span><span class="w"> </span><span class="n">GL_COLOR_MATERIAL</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
<p>then some of the <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> color properties will track the color. By default, setting the color will also set the current front and back, ambient and diffuse <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> properties. That is, for example, calling</p>
<div class="highlight"><pre><span></span><code><span class="n">glColor3f</span><span class="p">(</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
<p>will, if <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> is enabled, have the same effect as calling</p>
<div class="highlight"><pre><span></span><code><span class="n">glMaterialfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL_FRONT_AND_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_AMBIENT_AND_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="p">);</span>
<span class="n">where</span><span class="w"> </span><span class="n">array</span><span class="w"> </span><span class="n">contains</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">values</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.</span><span class="w"> </span><span class="n">You</span><span class="w"> </span><span class="n">can</span><span class="w"> </span><span class="n">change</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">material</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="n">that</span><span class="w"> </span><span class="n">tracks</span><span class="w"> </span><span class="n">the</span><span class="w"> </span><span class="n">color</span><span class="w"> </span><span class="n">using</span>

<span class="err">```</span><span class="n">c</span>
<span class="kt">void</span><span class="w"> </span><span class="n">glColorMaterial</span><span class="p">(</span><span class="w"> </span><span class="n">side</span><span class="p">,</span><span class="w"> </span><span class="n">property</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
<p>where <em>side</em> can be <em>GL_FRONT_AND_BACK</em>, <em>GL_FRONT</em>, or <em>GL_BACK</em>, and <em>property</em> can be <em>GL_AMBIENT</em>, <em>GL_DIFFUSE</em>, <em>GL_SPECULAR</em>, <em>GL_EMISSION</em>, or <em>GL_AMBIENT_AND_DIFFUSE</em>. Neither glEnable nor glColorMaterial can be called between calls to <em>glBegin</em> and <em>glEnd</em>, so all of the vertices of a primitive must use the same setting.</p>
<p>Recall that when <em>glDrawArrays</em> or <em>glDrawElements</em> is used to draw a primitive, the color values for the vertices of the primitive can be taken from a color array, as specified using <em>glColorPointer</em>. (See <a href="../../c3/s4/#342-gldrawarrays和gldrawelements">Subsection 3.4.2</a>.) There are no similar arrays for <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> properties. However, if a color array is used while <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> is enabled, and if GL_COLOR_MATERIAL is also enabled, then the color array will be used as the source for the values of the <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> properties that are tracking the color.</p>
</div>
</div>
</div>
<h2 id="422-定义法向量">4.2.2 定义法向量<a class="headerlink" href="#422-定义法向量" title="Permanent link">&para;</a></h2>
<p><strong>Defining Normal Vectors</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">中文</label><label for="__tabbed_3_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p>法向量对照明计算至关重要。（见<a href="../s1/#413-法向量">小节4.1.3</a>）。像颜色和材质一样，法向量也是顶点的属性。OpenGL状态包括一个当前法向量，该法向量是通过glNormal<em>系列函数设置的。当使用</em>glVertex<strong>指定顶点时，会保存当前法向量的副本作为顶点的属性，并且在通过照明方程计算顶点颜色时，将其用作该顶点的法向量。请注意，顶点的法向量必须在调用该顶点的*glVertex</strong>之前指定。</p>
<p>glNormal<strong>系列函数包括glNormal3f、glNormal3d、glNormal3fv和glNormal3dv。像往常一样，“v”表示值在数组中，“f”表示值是</strong>浮点数<strong>，“d”表示值是</strong>双精度浮点数**。（所有法向量都有三个分量）。一些示例：</p>
<div class="highlight"><pre><span></span><code><span class="n">glNormal3f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">//（这是默认值。）</span>
<span class="n">glNormal3d</span><span class="p">(</span><span class="mf">0.707</span><span class="p">,</span><span class="w"> </span><span class="mf">0.707</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">);</span>
<span class="kt">float</span><span class="w"> </span><span class="n">normalArray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">0.577</span><span class="p">,</span><span class="w"> </span><span class="mf">0.577</span><span class="p">,</span><span class="w"> </span><span class="mf">0.577</span><span class="p">};</span>
<span class="n">glNormal3fv</span><span class="p">(</span><span class="n">normalArray</span><span class="p">);</span>
</code></pre></div>
<p>对于应该看起来是平面的多边形，所有顶点都使用相同的法向量。例如，要绘制一个面向正y轴方向的立方体的“顶部”面：</p>
<div class="highlight"><pre><span></span><code><span class="n">glNormal3f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// 指向正y轴方向</span>
<span class="n">glBegin</span><span class="p">(</span><span class="n">GL_QUADS</span><span class="p">);</span>
<span class="n">glVertex3fv</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="w">  </span>
<span class="n">glVertex3fv</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">-1</span><span class="p">);</span>
<span class="n">glVertex3fv</span><span class="p">(</span><span class="mi">-1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">-1</span><span class="p">);</span>
<span class="n">glVertex3fv</span><span class="p">(</span><span class="mi">-1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="n">glEnd</span><span class="p">();</span>
</code></pre></div>
<p>记住，法向量应该指向多边形的前表面，并且前表面是由生成顶点的顺序决定的。（您可能认为前表面应该由法向量指向的方向决定，但实际上并非如此。如果顶点的法向量指向错误的方向，那么照明计算将无法为该顶点给出正确的颜色。）</p>
<p>当建模平滑表面时，法向量应垂直于表面，而不是垂直于近似表面的多边形。（见<a href="../s1/#413-法向量">小节4.1.3</a>）。假设我们想绘制一个半径为1，高度为2的圆柱体的侧面，其中圆柱体的中心位于(0,0,0)，轴沿着z轴。我们可以使用单个三角形条带来近似表面。圆柱体侧面的顶部和底部边缘是圆形。沿着上边缘的顶点将具有坐标(cos(a),sin(a),1)，沿着下边缘的顶点将具有坐标(cos(a),sin(a),-1)，其中a是某个角度。法向量指向与半径相同的方向，但由于它直接从圆柱体侧面伸出，其z坐标为零。因此，在这两个点上，圆柱体侧面的法向量将是(cos(a),sin(a),0)。从z轴顶部向下看圆柱体，它看起来像这样：</p>
<p><a class="glightbox" href="../../../en/c4/normal-to-cylinder.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="123" src="../../../en/c4/normal-to-cylinder.png" /></a></p>
<p>当我们将圆柱体的侧面作为三角形条带绘制时，我们必须在交替的边缘上生成顶点对。法向量对于这对顶点是相同的，但对于不同的对是不同的。这是代码：</p>
<div class="highlight"><pre><span></span><code><span class="n">glBegin</span><span class="p">(</span><span class="n">GL_TRIANGLE_STRIP</span><span class="p">);</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="mf">3.14159</span><span class="o">/</span><span class="mi">16</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w">  </span><span class="c1">// i是圆周的16分之一</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
<span class="w">    </span><span class="n">glNormal3f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span><span class="w">  </span><span class="c1">// 这个角度的两个顶点的法向量。</span>
<span class="w">    </span><span class="n">glVertex3f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w">  </span><span class="c1">// 在上边缘的顶点。</span>
<span class="w">    </span><span class="n">glVertex3f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">);</span><span class="w"> </span><span class="c1">// 在下边缘的顶点。</span>
<span class="p">}</span>
<span class="n">glEnd</span><span class="p">();</span>
</code></pre></div>
<p>另一方面，当我们绘制圆柱体的顶部和底部时，我们希望是一个平面多边形，顶部的法向量指向(0,0,1)方向，底部的法向量指向(0,0,-1)方向：</p>
<div class="highlight"><pre><span></span><code><span class="n">glNormal3f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="n">glBegin</span><span class="p">(</span><span class="n">GL_TRIANGLE_FAN</span><span class="p">);</span><span class="w">  </span><span class="c1">// 绘制顶部，在z = 1平面上。</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="mf">3.14159</span><span class="o">/</span><span class="mi">16</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
<span class="w">    </span><span class="n">glVertex3f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">glEnd</span><span class="p">();</span>

<span class="n">glNormal3f</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">);</span>
<span class="n">glBegin</span><span class="p">(</span><span class="n">GL_TRIANGLE_FAN</span><span class="p">);</span><span class="w">  </span><span class="c1">// 绘制底部，在z = -1平面上。</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="mf">3.14159</span><span class="o">/</span><span class="mi">16</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
<span class="w">    </span><span class="n">glVertex3f</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="p">);</span>
<span class="p">}</span>
<span class="n">glEnd</span><span class="p">();</span>
</code></pre></div>
<p>注意，底部的顶点是按与顶部顶点相反的顺序生成的，以考虑顶部和底部面向相反方向的事实。像往常一样，顶点需要按从前往看的逆时针顺序枚举。</p>
<hr />
<p>当使用<em>glDrawArrays</em>或<em>glDrawElements</em>绘制原语时，可以通过使用法向量数组来为每个顶点提供不同的法向量。法向量数组的工作原理与颜色数组和顶点数组相同。要使用它，您需要通过调用以下命令来启用法向量数组的使用：</p>
<div class="highlight"><pre><span></span><code><span class="n">glEnableClientState</span><span class="p">(</span><span class="n">GL_NORMAL_ARRAY</span><span class="p">);</span>
</code></pre></div>
<p>法向量的坐标必须存储在数组中（或JOGL中的nio缓冲区中），并且必须通过调用以下命令来指定数据的位置：</p>
<div class="highlight"><pre><span></span><code><span class="n">glNormalPointer</span><span class="p">(</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">stride</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="p">);</span>
</code></pre></div>
<p><em>type</em>指定数组中值的类型。它可以是<em>GL_INT</em>、<em>GL_FLOAT</em>或<em>GL_DOUBLE</em>。步长是一个整数，通常为0，意味着法向量之间没有额外的数据在数组中。data是包含法向量的数组（或缓冲区），每个法向量有三个数字。</p>
<p>有了这样的设置，当使用<em>glDrawArrays</em>或<em>glDrawElements</em>绘制原语时，原语的法向量将从数组中获取。请注意，如果未启用<em>GL_NORMAL_ARRAY</em>，则原语的所有法向量将相同，并将等于由<em>glNormal</em>*设置的当前法向量。</p>
<hr />
<p>照明方程假定法向量是单位法向量，即它们的长度等于一。OpenGL的默认设置是使用提供的法向量，即使它们的长度不是一，这将给出错误的结果。然而，如果您调用：</p>
<div class="highlight"><pre><span></span><code><span class="n">glEnable</span><span class="p">(</span><span class="n">GL_NORMALIZE</span><span class="p">);</span>
</code></pre></div>
<p>那么OpenGL将自动将每个法向量转换为指向同一方向的单位法向量。</p>
<p>请注意，当应用几何变换时，法向量会与顶点一起变换；这是必要的，因为变换可以改变表面朝向的方向。缩放变换可以改变法向量的长度，所以即使您提供了单位法向量，在缩放变换后它们也不会是单位法向量。然而，如果您启用了<em>GL_NORMALIZE</em>，变换后的法向量将自动转换回单位法向量。我的建议是<strong>始终</strong>在OpenGL初始化过程中启用<em>GL_NORMALIZE</em>。唯一的例外是您提供的所有法向量的长度都是一，并且您不应用任何缩放变换。（平移和旋转是可以的，因为它们不修改长度。）</p>
</div>
<div class="tabbed-block">
<p>Normal vectors are essential to <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> calculations. (See <a href="../s1/#413-法向量">Subsection 4.1.3</a>.) Like color and <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr>, normal vectors are <abbr title="A property, such as color, of a graphical object. An image can be specified by the geometric shapes that it contains, together with their attributes.">attributes</abbr> of vertices. The <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> state includes a current <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr>, which is set using functions in the family glNormal<em>. When a <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> is specified with </em>glVertex*<em>, a copy of the current <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> is saved as an <abbr title="A property, such as color, of a graphical object. An image can be specified by the geometric shapes that it contains, together with their attributes.">attribute</abbr> of the <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr>, and it is used as the <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> for that <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> when the color of the <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> is computed by the <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> equation. Note that the <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> for a <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> must be specified </em><em>before</em><em> </em>glVertex** is called for that <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr>.</p>
<p>Functions in the family <em>glNormal*</em> include <em>glNormal3f</em>, <em>glNormal3d</em>, <em>glNormal3fv</em>, and <em>glNormal3dv</em>. As usual, a "v" means that the values are in an array, "f" means that the values are <strong>floats</strong>, and "d" means that the values are <strong>doubles</strong>. (All normal vectors have three components). Some examples:</p>
<div class="highlight"><pre><span></span><code><span class="n">glNormal3f</span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span><span class="w">  </span><span class="c1">// (This is the default value.)</span>
<span class="n">glNormal3d</span><span class="p">(</span><span class="w"> </span><span class="mf">0.707</span><span class="p">,</span><span class="w"> </span><span class="mf">0.707</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="w"> </span><span class="p">);</span>
<span class="kt">float</span><span class="w"> </span><span class="n">normalArray</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">0.577</span><span class="p">,</span><span class="w"> </span><span class="mf">0.577</span><span class="p">,</span><span class="w"> </span><span class="mf">0.577</span><span class="w"> </span><span class="p">};</span>
<span class="n">glNormal3fv</span><span class="p">(</span><span class="w"> </span><span class="n">normalArray</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
<p>For a <abbr title="A multi-sided shape lying in a plane and specified by a list of points, called its vertices, and made up of the line segments from each point in the list to the next point in the list, plus a line segment from the last point in the list to the first point. All the points are required to lie in the same plane. Sometimes the term &quot;polygon&quot; includes the interior of the shape as well as its boundary.">polygon</abbr> that is supposed to look flat, the same <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> is used for all of the vertices of the <abbr title="A multi-sided shape lying in a plane and specified by a list of points, called its vertices, and made up of the line segments from each point in the list to the next point in the list, plus a line segment from the last point in the list to the first point. All the points are required to lie in the same plane. Sometimes the term &quot;polygon&quot; includes the interior of the shape as well as its boundary.">polygon</abbr>. For example, to draw one side of a cube, say the "top" side, facing in the direction of the positive y-axis:</p>
<div class="highlight"><pre><span></span><code><span class="n">glNormal3f</span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// Points along positive y-axis</span>
<span class="n">glBegin</span><span class="p">(</span><span class="n">GL_QUADS</span><span class="p">);</span>
<span class="n">glVertex3fv</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span><span class="w">  </span>
<span class="n">glVertex3fv</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">-1</span><span class="p">);</span>
<span class="n">glVertex3fv</span><span class="p">(</span><span class="mi">-1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">-1</span><span class="p">);</span>
<span class="n">glVertex3fv</span><span class="p">(</span><span class="mi">-1</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">1</span><span class="p">);</span>
<span class="n">glEnd</span><span class="p">();</span>
</code></pre></div>
<p>Remember that the <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> should point out of the <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the front, the vertices are enumerated in counterclockwise order around the polygon.">front face</abbr> of the <abbr title="A multi-sided shape lying in a plane and specified by a list of points, called its vertices, and made up of the line segments from each point in the list to the next point in the list, plus a line segment from the last point in the list to the first point. All the points are required to lie in the same plane. Sometimes the term &quot;polygon&quot; includes the interior of the shape as well as its boundary.">polygon</abbr>, and that the <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the front, the vertices are enumerated in counterclockwise order around the polygon.">front face</abbr> is determined by the order in which the vertices are generated. (You might think that the <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the front, the vertices are enumerated in counterclockwise order around the polygon.">front face</abbr> should be determined by the direction in which the <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> points, but that is not how its done. If a <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> for a <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> points in the wrong direction, then <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> calculations will not give the correct color for that <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr>.)</p>
<p>When modeling a smooth surface, normal vectors should be chosen perpendicular to the surface, rather than to the polygons that approximate the surface. (See <a href="../s1/#413-法向量">Subsection 4.1.3</a>.) Suppose that we want to draw the side of a cylinder with radius 1 and height 2, where the center of the cylinder is at (0,0,0) and the axis lies along the z-axis. We can approximate the surface using a single triangle strip. The top and bottom edges of the side of a cylinder are circles. Vertices along the top edge will have coordinates (cos(a),sin(a),1) and vertices along the bottom edge will have coordinates (cos(a),sin(a),−1), where a is some angle. The <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> points in the same direction as the radius, but its z-coordinate is zero since it points directly out from the side of the cylinder. So, the <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> to the side of the cylinder at both of these points will be (cos(a),sin(a),0). Looking down the z-axis at the top of the cylinder, it looks like this:</p>
<p><a class="glightbox" href="../../../en/c4/normal-to-cylinder.png" data-type="image" data-width="100%" data-height="auto" data-desc-position="bottom"><img alt="123" src="../../../en/c4/normal-to-cylinder.png" /></a></p>
<p>When we draw the side of the cylinder as a triangle strip, we have to generate pairs of vertices on alternating edges. The <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> is the same for the two vertices in the pair, but it is different for different pairs. Here is the code:</p>
<div class="highlight"><pre><span></span><code><span class="n">glBegin</span><span class="p">(</span><span class="n">GL_TRIANGLE_STRIP</span><span class="p">);</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="mf">3.14159</span><span class="o">/</span><span class="mi">16</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w">  </span><span class="c1">// i 16-ths of a full circle</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
<span class="w">    </span><span class="n">glNormal3f</span><span class="p">(</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">);</span><span class="w">  </span><span class="c1">// Normal for both vertices at this angle.</span>
<span class="w">    </span><span class="n">glVertex3f</span><span class="p">(</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span><span class="w">  </span><span class="c1">// Vertex on the top edge.</span>
<span class="w">    </span><span class="n">glVertex3f</span><span class="p">(</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// Vertex on the bottom edge.</span>
<span class="p">}</span>
<span class="n">glEnd</span><span class="p">();</span>
</code></pre></div>
<p>When we draw the top and bottom of the cylinder, on the other hand, we want a flat <abbr title="A multi-sided shape lying in a plane and specified by a list of points, called its vertices, and made up of the line segments from each point in the list to the next point in the list, plus a line segment from the last point in the list to the first point. All the points are required to lie in the same plane. Sometimes the term &quot;polygon&quot; includes the interior of the shape as well as its boundary.">polygon</abbr>, with the <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> pointing in the direction (0,0,1) for the top and in the direction (0,0,−1) for the bottom:</p>
<div class="highlight"><pre><span></span><code><span class="n">glNormal3f</span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span>
<span class="n">glBegin</span><span class="p">(</span><span class="n">GL_TRIANGLE_FAN</span><span class="p">);</span><span class="w">  </span><span class="c1">// Draw the top, in the plane z = 1.</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">++</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="mf">3.14159</span><span class="o">/</span><span class="mi">16</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
<span class="w">    </span><span class="n">glVertex3f</span><span class="p">(</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
<span class="n">glEnd</span><span class="p">();</span>

<span class="n">glNormal3f</span><span class="p">(</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class="p">);</span>
<span class="n">glBegin</span><span class="p">(</span><span class="n">GL_TRIANGLE_FAN</span><span class="p">);</span><span class="w">  </span><span class="c1">// Draw the bottom, in the plane z = -1</span>
<span class="k">for</span><span class="w"> </span><span class="p">(</span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">16</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="n">i</span><span class="o">--</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">angle</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">*</span><span class="mf">3.14159</span><span class="o">/</span><span class="mi">16</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">cos</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
<span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sin</span><span class="p">(</span><span class="n">angle</span><span class="p">);</span>
<span class="w">    </span><span class="n">glVertex3f</span><span class="p">(</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="mi">-1</span><span class="w"> </span><span class="p">);</span>
<span class="p">}</span>
<span class="n">glEnd</span><span class="p">();</span>
</code></pre></div>
<p>Note that the vertices for the bottom are generated in the opposite order from the vertices for the top, to account for the fact that the top and bottom face in opposite directions. As always, vertices need to be enumerated in counterclockwise order, as seen from the front.</p>
<hr />
<p>When drawing a primitive with <em>glDrawArrays</em> or <em>glDrawElements</em>, it is possible to provide a different normal for each <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> by using a normal array to hold the normal vectors. The normal array works in the same way as the color array and the <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> array. To use one, you need to enable the use of a normal array by calling</p>
<div class="highlight"><pre><span></span><code><span class="n">glEnableClientState</span><span class="p">(</span><span class="n">GL_NORMAL_ARRAY</span><span class="p">);</span>
</code></pre></div>
<p>The coordinates for the normal vectors must be stored in an array (or in an <abbr title="A Java object belonging to the class java.nio.Buffer or one of its subclasses. Nio buffers are similar to arrays, but they are optimized for input/output operations. Nio buffers are used instead of arrays for certain purposes in Java's JOGL API for OpenGL.">nio buffer</abbr> for <abbr title="OpenGL的Java实现。JOGL非常复杂，因为它试图在一个编程系统中支持所有版本的OpenGL。JOGL与Java的Swing和AWT图形无缝集成。">JOGL</abbr>), and the location of the data must be specified by calling</p>
<div class="highlight"><pre><span></span><code><span class="n">glNormalPointer</span><span class="p">(</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">stride</span><span class="p">,</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
<p>The <em>type</em> specifies the type of values in the array. It can be <em>GL_INT</em>, <em>GL_FLOAT</em>, or <em>GL_DOUBLE</em>. The stride is an integer, which is usually 0, meaning that there is no extra data in the array between the normal vectors. And data is the array (or buffer) that holds the normal vectors, with three numbers for each normal.</p>
<p>With this setup, when <em>glDrawArrays</em> or <em>glDrawElements</em> is used to draw a primitive, the normal vectors for the primitive will be pulled from the array. Note that if <em>GL_NORMAL_ARRAY</em> is not enabled, then all of the normal vectors for the primitive will be the same, and will be equal to the current <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> as set by <em>glNormal*</em>.</p>
<hr />
<p>The <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> equation assumes that normal vectors are unit normals, that is, that they have length equal to one. The default in <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> is to use normal vectors as provided, even if they don't have length one, which will give incorrect results. However, if you call</p>
<div class="highlight"><pre><span></span><code><span class="n">glEnable</span><span class="p">(</span><span class="n">GL_NORMALIZE</span><span class="p">);</span>
</code></pre></div>
<p>then <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> will automatically convert every <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> into a <abbr title="A normal vector of length one; that is, a unit vector that is perpendicular to a curve or surface at a given point on the curve or surface.">unit normal</abbr> that points in the same direction.</p>
<p>Note that when a <abbr title="A coordinate transformation; that is, a function that can be applied to each of the points in a geometric object to produce a new object. Common transforms include scaling, rotation, and translation.">geometric transform</abbr> is applied, normal vectors are transformed along with vertices; this is necessary because a transformation can change the direction in which a surface is facing. A <abbr title="A geometric transform that multiplies each coordinate of a point by a number called the scaling factor. Scaling increases or decreases the size of an object, but also moves its points closer to or farther from the origin. Scaling can be uniform—the same in every direction—or non-uniform—with a different scaling factor in each coordinate direction. A negative scaling factor can be used to apply a reflection.">scaling</abbr> transformation can change the length of a <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr>, so even if you provided <abbr title="A normal vector of length one; that is, a unit vector that is perpendicular to a curve or surface at a given point on the curve or surface.">unit normal</abbr> vectors, they will not be unit normals after a <abbr title="A geometric transform that multiplies each coordinate of a point by a number called the scaling factor. Scaling increases or decreases the size of an object, but also moves its points closer to or farther from the origin. Scaling can be uniform—the same in every direction—or non-uniform—with a different scaling factor in each coordinate direction. A negative scaling factor can be used to apply a reflection.">scaling</abbr> transformation. However, if you have enabled <em>GL_NORMALIZE</em>, the transformed normals will automatically be converted back to unit normals. My recommendation is to <strong>always</strong> enable <em>GL_NORMALIZE</em> as part of your <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> initialization. The only exception would be if all of the normal vectors that you provide are of length one and you do not apply any <abbr title="A geometric transform that multiplies each coordinate of a point by a number called the scaling factor. Scaling increases or decreases the size of an object, but also moves its points closer to or farther from the origin. Scaling can be uniform—the same in every direction—or non-uniform—with a different scaling factor in each coordinate direction. A negative scaling factor can be used to apply a reflection.">scaling</abbr> transformations. (Translations and rotations are OK, because they do not modify lengths.)</p>
</div>
</div>
</div>
<h2 id="423-应用灯光">4.2.3 应用灯光<a class="headerlink" href="#423-应用灯光" title="Permanent link">&para;</a></h2>
<p><strong>Working with Lights</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">中文</label><label for="__tabbed_4_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> 1.1 至少支持八个光源，它们由常量 <em>GL_LIGHT0</em>, <em>GL_LIGHT1</em>, ..., <em>GL_LIGHT7</em> 标识。（<abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> 实现可能允许额外的光源。）每个光源可以配置为方向光或点光源，每个光源可以有自己的散射、镜面和环境光强度。（见<a href="../s1/#412-光属性">小节4.1.2</a>。）</p>
<p>默认情况下，所有光源都是禁用的。要启用一个光源，调用 <em>glEnable(light)</em>，其中 light 是 <em>GL_LIGHT0</em>, <em>GL_LIGHT1</em>, ... 等常量之一。然而，仅仅启用一个光源并不会产生任何照明，除了 <em>GL_LIGHT0</em> 的情况，因为所有光强度默认都为零，唯一的例外是第0号光的散射颜色。要从其他光源获得光，您需要更改它们的一些属性。使用以下函数设置光源属性：</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">glLightfv</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">light</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">*</span><span class="w"> </span><span class="n">valueArray</span><span class="p">);</span>
</code></pre></div>
<p>第一个参数是 <em>GL_LIGHT0</em>, <em>GL_LIGHT1</em>, ..., <em>GL_LIGHT7</em> 中的一个常量。它指定了正在配置的光源。第二个参数指明了正在设置的光源属性，可以是 <em>GL_DIFFUSE</em>, <em>GL_SPECULAR</em>, <em>GL_AMBIENT</em>, 或 <em>GL_POSITION</em>。最后一个参数是一个数组，至少包含四个浮点数，给出属性的值。</p>
<p>对于颜色属性，数组中的四个数字指定了颜色的红色、绿色、蓝色和透明度分量。（透明度分量实际上没有用。）值通常在0.0到1.0的范围内，但也可以超出这个范围；事实上，大于1.0的值有时是有用的。请记住，光源的散射和镜面颜色告诉了光如何与散射和镜面材质颜色互动，环境颜色在启用光源时简单地添加到全局环境光中。例如，要将第0号光设置为带有蓝色镜面高光的蓝色光，并在打开时向环境光中添加一点蓝色，您可能会使用：</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="w"> </span><span class="n">blue1</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<span class="kt">float</span><span class="w"> </span><span class="n">blue2</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<span class="kt">float</span><span class="w"> </span><span class="n">blue3</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.15</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<span class="n">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span><span class="w"> </span><span class="n">GL_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">blue1</span><span class="p">);</span>
<span class="n">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span><span class="w"> </span><span class="n">GL_SPECULAR</span><span class="p">,</span><span class="w"> </span><span class="n">blue2</span><span class="p">);</span>
<span class="n">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span><span class="w"> </span><span class="n">GL_AMBIENT</span><span class="p">,</span><span class="w"> </span><span class="n">blue3</span><span class="p">);</span>
</code></pre></div>
<p>可能需要一些实验才能准确地找出数组中要使用的值，以获得您想要的效果。</p>
<hr />
<p>光源的 <em>GL_POSITION</em> 属性有很大的不同。它既用于设置光源是点光源还是方向光，也用于设置其位置或方向。<em>GL_POSITION</em> 的属性值是一个包含四个数字（x,y,z,w）的数组，其中至少一个必须非零。当第四个数字，w，为零时，光源是方向光，点 (x,y,z) 指定了光源的方向：光线沿着从点 (x,y,z) <strong>到</strong> 原点的线的方向照射。这与齐次坐标有关：光源的源头可以被认为是在 (x,y,z) 方向上无限远的点。</p>
<p>另一方面，如果第四个数字，w，非零，那么光源是点光源，它位于点 (x/w, y/w, z/w)。通常，w 是 1。值 (x,y,z,1) 给出了位于 (x,y,z) 的点光源。同样，这确实是齐次坐标。</p>
<p>所有光源的默认位置是 (0,0,1,0)，表示从 z 轴正方向照射到 z 轴负方向的方向光。</p>
<p>关于光源的一个重要且可能令人困惑的事实是，为光源指定的位置会通过使用 glLightfv 设置位置时有效的模型视图变换进行变换。换句话说，位置是以眼睛坐标设置的，而不是世界坐标。用属性设置为 GL_POSITION 调用 glLightfv 非常类似于调用 <em>glVertex</em>*。光源位置的变换方式与顶点坐标的变换方式相同。例如，</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="w"> </span><span class="n">position</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="p">};</span>
<span class="n">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span><span class="w"> </span><span class="n">GL_POSITION</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">);</span>
</code></pre></div>
<p>将光源放置在与</p>
<div class="highlight"><pre><span></span><code><span class="n">glTranslatef</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
<span class="kt">float</span><span class="w"> </span><span class="n">position</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">};</span>
<span class="n">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span><span class="w"> </span><span class="n">GL_POSITION</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">);</span>
</code></pre></div>
<p>相同的地方。对于方向光，光源的方向会通过模型视图变换的旋转部分进行变换。</p>
<p>使用光源位置有三种基本方法。最容易的思考方式是考虑可能的动画场景。</p>
<p><strong>第一种</strong>，如果在应用任何模型视图变换之前设置位置，那么光源相对于观察者是固定的。例如，默认的光源位置在模型视图变换为单位矩阵时有效地设置为 (0,0,1,0)。这意味着它沿着观察者坐标系中 z 轴的负方向照射，其中 z 轴负方向指向屏幕内。另一种说法是，光源总是从观察者方向照射进场景。就像光源附着在观察者上。如果观察者在世界中移动，光源也会随着观察者移动。</p>
<p><strong>第二种</strong>，如果在应用了观察变换并且在应用任何建模变换之前设置位置，那么光源的位置固定在世界坐标中。它不会随着观察者移动，也不会随着场景中的对象移动。就像光源附着在世界上。</p>
<p><strong>第三种</strong>，如果在应用了建模变换之后设置位置，那么光源会受到该建模变换的影响。这可以用来制作一个随着建模变换改变而在场景中移动的光源。如果光源受到与对象相同的建模变换的影响，那么光源将随着对象移动，就好像它附着在对象上。</p>
<p>示例程序 <a href="../../../en/source/glut/four-lights.c">glut/four-lights.c</a> 或 <a href="../../../en/source/jogl/FourLights.java">jogl/FourLights.java</a> 使用了多个移动的彩色光源，并允许您打开和关闭它们以查看效果。下面的演示是同一个程序的 <abbr title="A programming language for web pages. JavaScript code on a web page is executed by a web browser that displays the page, and it can interact with the contents of the web page and with the user. There are JavaScript APIs for 2D and for 3D graphics">JavaScript</abbr> 版本。该程序让您可以看到来自不同来源的光如何结合产生对象的可见颜色。源代码提供了配置光源和使用材质属性的示例。</p>
<p><iframe src="../../../en/demos/c4/four-lights-demo.html" width="620" height="470"></iframe></p>
</div>
<div class="tabbed-block">
<p><abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> 1.1 supports at least eight light sources, which are identified by the constants <em>GL_LIGHT0</em>, <em>GL_LIGHT1</em>, ..., <em>GL_LIGHT7</em>. (An <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> implementation might allow additional lights.) Each light source can be configured to be either a <abbr title="A light source whose light rays are parallel, all arriving from the same direction. Can be considered to be a light source at an effectively infinite distance. Also called a &quot;sun,&quot; since the Sun is an example of a directional light source.">directional light</abbr> or a <abbr title="A light source whose light rays emanate from a single point. Also called a &quot;lamp,&quot; since a lamp approximates a point source of light. Also called a positional light.">point light</abbr>, and each light can have its own diffuse, specular, and ambient intensities. (See <a href="../s1/#412-光属性">Subsection 4.1.2</a>.)</p>
<p>By default, all of the light sources are disabled. To enable a light, call <em>glEnable(light)</em>, where light is one of the constants <em>GL_LIGHT0</em>, <em>GL_LIGHT1</em>, .... However, just enabling a light does not give any illumination, except in the case of <em>GL_LIGHT0</em>, since all light intensities are zero by default, with the single exception of the <abbr title="A material property that represents the proportion of incident light that is reflected diffusely from a surface.">diffuse color</abbr> of light number 0. To get any light from the other light sources, you need to change some of their properties. Light properties can be set using the functions</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="nf">glLightfv</span><span class="p">(</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">light</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">*</span><span class="w"> </span><span class="n">valueArray</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
<p>The first parameter is one of the constants <em>GL_LIGHT0</em>, <em>GL_LIGHT1</em>, ..., <em>GL_LIGHT7</em>. It specifies which light is being configured. The second parameter says which property of the light is being set. It can be <em>GL_DIFFUSE</em>, <em>GL_SPECULAR</em>, <em>GL_AMBIENT</em>, or <em>GL_POSITION</em>. The last parameter is an array that contains at least four float numbers, giving the value of the property.</p>
<p>For the color properties, the four numbers in the array specify the red, green, blue, and <abbr title="An extra component (that is, one of the numbers that are used to specify a color) in a color model that is not part of the actual color specification. The alpha component is extra information. It is most often used to specify the degree of transparency of a color.">alpha</abbr> components of the color. (The <abbr title="An extra component (that is, one of the numbers that are used to specify a color) in a color model that is not part of the actual color specification. The alpha component is extra information. It is most often used to specify the degree of transparency of a color.">alpha</abbr> component is not actually used for anything.) The values generally lie in the range 0.0 to 1.0, but can lie outside that range; in fact, values larger than 1.0 are occasionally useful. Remember that the diffuse and specular colors of a light tell how the light interacts with the diffuse and specular <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> colors, and the <abbr title="A material property that represents the proportion of ambient light in the environment that is reflected by a surface.">ambient color</abbr> is simply added to the global <abbr title="Directionless light that exists in an environment but does not seem to come from a particular source in the environment. An approximation for light that has been reflected so many times that its original source can't be identified. Ambient light illuminates all objects in a scene equally.">ambient light</abbr> when the light is enabled. For example, to set up light zero as a bluish light, with blue specular highlights, that adds a bit of blue to the <abbr title="Directionless light that exists in an environment but does not seem to come from a particular source in the environment. An approximation for light that has been reflected so many times that its original source can't be identified. Ambient light illuminates all objects in a scene equally.">ambient light</abbr> when it is turned on, you might use:</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="w"> </span><span class="n">blue1</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
<span class="kt">float</span><span class="w"> </span><span class="n">blue2</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.8</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
<span class="kt">float</span><span class="w"> </span><span class="n">blue3</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.15</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
<span class="n">glLightfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL_LIGHT1</span><span class="p">,</span><span class="w"> </span><span class="n">GL_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">blue1</span><span class="w"> </span><span class="p">);</span>
<span class="n">glLightfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL_LIGHT1</span><span class="p">,</span><span class="w"> </span><span class="n">GL_SPECULAR</span><span class="p">,</span><span class="w"> </span><span class="n">blue2</span><span class="w"> </span><span class="p">);</span>
<span class="n">glLightfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL_LIGHT1</span><span class="p">,</span><span class="w"> </span><span class="n">GL_AMBIENT</span><span class="p">,</span><span class="w"> </span><span class="n">blue3</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
<p>It would likely take some experimentation to figure out exactly what values to use in the arrays to get the effect that you want.</p>
<hr />
<p>The <em>GL_POSITION</em> property of a light is quite a bit different. It is used both to set whether the light is a <abbr title="A light source whose light rays emanate from a single point. Also called a &quot;lamp,&quot; since a lamp approximates a point source of light. Also called a positional light.">point light</abbr> or a <abbr title="A light source whose light rays are parallel, all arriving from the same direction. Can be considered to be a light source at an effectively infinite distance. Also called a &quot;sun,&quot; since the Sun is an example of a directional light source.">directional light</abbr>, and to set its position or direction. The property value for <em>GL_POSITION</em> is an array of four numbers (x,y,z,w), of which at least one must be non-zero. When the fourth number, w, is zero, then the light is directional and the point (x,y,z) specifies the direction of the light: The light rays shine in the direction of the line <strong>from</strong> the point (x,y,z) <strong>towards</strong> the origin. This is related to <abbr title="A way of representing n-dimensional vectors as (n+1)-dimensional vectors where two (n+1) vectors represent the same n-dimensional vector if they differ by a scalar multiple. In 3D, for example, if w is not zero, then the homogeneous coordinates (x,y,z,w) are equivalent to homogeneous coordinates (x/w,y/w,z/w,1), since they differ by multiplication by the scalar w. Both sets of coordinates represent the 3D vector (x/w,y/w,z/w)">homogeneous coordinates</abbr>: The source of the light can be considered to be a point at infinity in the direction of (x,y,z).</p>
<p>On the other hand, if the fourth number, w, is non-zero, then the light is a <abbr title="A light source whose light rays emanate from a single point. Also called a &quot;lamp,&quot; since a lamp approximates a point source of light. Also called a positional light.">point light</abbr>, and it is located at the point (x/w, y/w, z/w). Usually, w is 1. The value (x,y,z,1) gives a <abbr title="A light source whose light rays emanate from a single point. Also called a &quot;lamp,&quot; since a lamp approximates a point source of light. Also called a positional light.">point light</abbr> at (x,y,z). Again, this is really <abbr title="A way of representing n-dimensional vectors as (n+1)-dimensional vectors where two (n+1) vectors represent the same n-dimensional vector if they differ by a scalar multiple. In 3D, for example, if w is not zero, then the homogeneous coordinates (x,y,z,w) are equivalent to homogeneous coordinates (x/w,y/w,z/w,1), since they differ by multiplication by the scalar w. Both sets of coordinates represent the 3D vector (x/w,y/w,z/w)">homogeneous coordinates</abbr>.</p>
<p>The default position for all lights is (0,0,1,0), representing a <abbr title="A light source whose light rays are parallel, all arriving from the same direction. Can be considered to be a light source at an effectively infinite distance. Also called a &quot;sun,&quot; since the Sun is an example of a directional light source.">directional light</abbr> shining from the positive direction of the z-axis, towards the negative direction of the z-axis.</p>
<p>One important and potentially confusing fact about lights is that the position that is specified for a light is transformed by the <abbr title="In OpenGL 1.1, a transform that combines the modeling transform with the viewing transform. That is, it is the composition of the transformation from object coordinates to world coordinates and the transformation from world coordinates to eye coordinates. Because of the equivalence between modeling and viewing transformations, world coordinates are not really meaningful for OpenGL, and only the combined transformation is tracked.">modelview transformation</abbr> that is in effect <strong>at the time the position is set</strong> using glLightfv. Another way of saying this is that the position is set in <abbr title="The coordinate system on 3D space defined by the viewer. In eye coordinates in OpenGL 1.1, the viewer is located at the origin, looking in the direction of the negative z-axis, with the positive y-axis pointing upwards, and the positive x-axis pointing to the right. The modelview transformation maps objects into the eye coordinate system, and the projection transform maps eye coordinates to clip coordinates.">eye coordinates</abbr>, not in <abbr title="The coordinate system in which a scene is defined. The image that is produced of the scene will show the contents of the world coordinate system that lie within some view volume (for 3D) or view window (for 2D). Objects are defined in their own object coordinate system. Modeling transformations are then applied to place objects into the scene; that is, they transform object coordinates to world coordinates.">world coordinates</abbr>. Calling glLightfv with the property set to GL_POSITION is very much like calling <em>glVertex*</em>. The light position is transformed in the same way that the <abbr title="One of the points that define a geometric primitive, such as the two endpoints of a line segment or the three vertices of a triangle. (The plural is &quot;vertices.&quot;) A vertex can be specified in a coordinate system by giving its x and y coordinates in 2D graphics, or its x, y, and z coordinates in 3D graphics.">vertex</abbr> coordinates would be transformed. For example,</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="w"> </span><span class="n">position</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">1</span><span class="w"> </span><span class="p">}</span>
<span class="n">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span><span class="w"> </span><span class="n">GL_POSITION</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">);</span>
</code></pre></div>
<p>puts the light in the same place as</p>
<div class="highlight"><pre><span></span><code><span class="n">glTranslatef</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">);</span>
<span class="kt">float</span><span class="w"> </span><span class="n">position</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="w"> </span><span class="p">}</span>
<span class="n">glLightfv</span><span class="p">(</span><span class="n">GL_LIGHT1</span><span class="p">,</span><span class="w"> </span><span class="n">GL_POSITION</span><span class="p">,</span><span class="w"> </span><span class="n">position</span><span class="p">);</span>
</code></pre></div>
<p>For a <abbr title="A light source whose light rays are parallel, all arriving from the same direction. Can be considered to be a light source at an effectively infinite distance. Also called a &quot;sun,&quot; since the Sun is an example of a directional light source.">directional light</abbr>, the direction of the light is transformed by the rotational part of the <abbr title="In OpenGL 1.1, a transform that combines the modeling transform with the viewing transform. That is, it is the composition of the transformation from object coordinates to world coordinates and the transformation from world coordinates to eye coordinates. Because of the equivalence between modeling and viewing transformations, world coordinates are not really meaningful for OpenGL, and only the combined transformation is tracked.">modelview transformation</abbr>.</p>
<p>There are three basic ways to use light position. It is easiest to think in terms of potentially animated scenes.</p>
<p><strong>First</strong>, if the position is set before any <abbr title="In OpenGL 1.1, a transform that combines the modeling transform with the viewing transform. That is, it is the composition of the transformation from object coordinates to world coordinates and the transformation from world coordinates to eye coordinates. Because of the equivalence between modeling and viewing transformations, world coordinates are not really meaningful for OpenGL, and only the combined transformation is tracked.">modelview transformation</abbr> is applied, then the light is fixed with respect to the viewer. For example, the default light position is effectively set to (0,0,1,0) while the modelview transform is the identity. This means that it shines in the direction of the negative z-axis, in the <abbr title="A way of assigning numerical coordinates to geometric points. In two dimensions, each point corresponds to a pair of numbers. In three dimensions, each point corresponds to a triple of numbers.">coordinate system</abbr> of the viewer, where the negative z-axis points into the screen. Another way of saying this is that the light always shines from the direction of the viewer into the scene. It's like the light is attached to the viewer. If the viewer moves about in the world, the light moves with the viewer.</p>
<p><strong>Second</strong>, if the position is set after the <abbr title="Setting the position and orientation of the viewer in a 3D world, which determine what will be visible when the 2D image of a 3D world is rendered.">viewing</abbr> transform has been applied and before any modeling transform is applied, then the position of the light is fixed in <abbr title="The coordinate system in which a scene is defined. The image that is produced of the scene will show the contents of the world coordinate system that lie within some view volume (for 3D) or view window (for 2D). Objects are defined in their own object coordinate system. Modeling transformations are then applied to place objects into the scene; that is, they transform object coordinates to world coordinates.">world coordinates</abbr>. It will not move with the viewer, and it will not move with objects in the scene. It's like the light is attached to the world.</p>
<p><strong>Third</strong>, if the position is set after a modeling transform has been applied, then the light is subject to that <abbr title="A transformation that is applied to an object to map that object into the world coordinate system or into the object coordinate system for a more complex, hierarchical object.">modeling transformation</abbr>. This can be used to make a light that moves around in the scene as the <abbr title="A transformation that is applied to an object to map that object into the world coordinate system or into the object coordinate system for a more complex, hierarchical object.">modeling transformation</abbr> changes. If the light is subject to the same <abbr title="A transformation that is applied to an object to map that object into the world coordinate system or into the object coordinate system for a more complex, hierarchical object.">modeling transformation</abbr> as an object, then the light will move around with that object, as if it is attached to the object.</p>
<p>The sample program <a href="../../../en/source/glut/four-lights.c">glut/four-lights.c</a> or <a href="../../../en/source/jogl/FourLights.java">jogl/FourLights.java</a> uses multiple moving, colored lights and lets you turn them on and off to see the effect. The demo below is a <abbr title="A programming language for web pages. JavaScript code on a web page is executed by a web browser that displays the page, and it can interact with the contents of the web page and with the user. There are JavaScript APIs for 2D and for 3D graphics">JavaScript</abbr> version of the same program. The program lets you see how light from various sources combines to produce the visible color of an object. The source code provides examples of configuring lights and using <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> properties.</p>
<p><iframe src="../../../en/demos/c4/four-lights-demo.html" width="620" height="470"></iframe></p>
</div>
</div>
</div>
<h2 id="424-全局光照属性">4.2.4 全局光照属性<a class="headerlink" href="#424-全局光照属性" title="Permanent link">&para;</a></h2>
<p><strong>Global Lighting Properties</strong></p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">中文</label><label for="__tabbed_5_2">英文</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<p><abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> 1.1 中的照明系统除了单个光源的属性外，还使用了几个全局属性。在 <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> 1.1 中，只有三个这样的属性。其中之一是全局环境光，它不来自任何光源的环境颜色属性。即使所有 <em>GL_LIGHT0</em>, <em>GL_LIGHT1</em>, ... 都被禁用，全局环境光也会存在于环境中。默认情况下，全局环境光是黑色的（即其 RGB 分量都是零）。可以使用以下函数更改其值：</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">glLightModelfv</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">*</span><span class="w"> </span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
<p>其中 <em>property</em> 必须是 <em>GL_LIGHT_MODEL_AMBIENT</em>，value 是一个包含四个数字的数组，给出全局环境光的 RGBA <abbr title="颜色模型中用于指定颜色的数字之一。例如，在 RGB 颜色模型中，一个颜色由三个颜色分量表示，分别代表颜色中红色、绿色和蓝色的量。">颜色分量</abbr>，范围在 0.0 到 1.0 之间。通常，全局环境光的级别应该相当低。例如，在 C 语言中：</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="w"> </span><span class="n">ambientLevel</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">0.15</span><span class="p">,</span><span class="w"> </span><span class="mf">0.15</span><span class="p">,</span><span class="w"> </span><span class="mf">0.15</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<span class="n">glLightModelfv</span><span class="p">(</span><span class="n">GL_LIGHT_MODEL_AMBIENT</span><span class="p">,</span><span class="w"> </span><span class="n">ambientLevel</span><span class="p">);</span>
</code></pre></div>
<p>颜色的 <abbr title="An extra component (that is, one of the numbers that are used to specify a color) in a color model that is not part of the actual color specification. The alpha component is extra information. It is most often used to specify the degree of transparency of a color.">alpha</abbr> 分量通常设置为 1，但不被用于任何目的。对于 <abbr title="OpenGL的Java实现。JOGL非常复杂，因为它试图在一个编程系统中支持所有版本的OpenGL。JOGL与Java的Swing和AWT图形无缝集成。">JOGL</abbr>，像往常一样，有一个额外的参数来指定数组中数据的起始索引，示例变成：</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="p">[]</span><span class="w"> </span><span class="n">ambientLevel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">0.15F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.15F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.15F</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">};</span>
<span class="n">gl</span><span class="p">.</span><span class="n">glLightModelfv</span><span class="p">(</span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_LIGHT_MODEL_AMBIENT</span><span class="p">,</span><span class="w"> </span><span class="n">ambientLevel</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">);</span>
</code></pre></div>
<p>另外两个光模型属性是选项，可以关闭或开启。这些属性是 <em>GL_LIGHT_MODEL_TWO_SIDE</em> 和 <em>GL_LIGHT_MODEL_LOCAL_VIEWER</em>。它们可以使用以下函数设置：</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">glLightModeli</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="p">)</span>
</code></pre></div>
<p>value 的值为 0 或 1，表示选项是否关闭或开启。您可以使用符号常量 GL_FALSE 和 GL_TRUE 作为 value，但这些只是 0 和 1 的名称。</p>
<p><em>GL_LIGHT_MODEL_TWO_SIDE</em> 用于开启双面照明。回想一下，多边形可以有两套材质属性，前材质和后材质。当双面照明关闭时（这是默认设置），只使用前材质；它既用于多边形的前表面，也用于后表面。此外，相同的法向量用于两个表面。由于这些向量指向——或者至少应该是指向——多边形前表面的外部，它们对于后表面没有给出正确的结果。实际上，后表面看起来像是被多边形前面的光源照亮的，但后表面应该被位于多边形后面的光源照亮。</p>
<p>另一方面，当双面照明开启时，后表面使用后材质，并且在照明计算中使用后表面时法向量的方向会被反转。</p>
<p>每当场景中可能有可见的后表面时，您都应该使用双面照明。（当您的场景由“实体”对象组成，后表面隐藏在实体内部时，就不会有这种情况。）使用双面照明，您可以选择在两个表面上使用相同的材质，或为两个表面指定不同的材质。例如，在前表面放置有光泽的紫色材质，在后表面放置较暗的黄色材质：</p>
<div class="highlight"><pre><span></span><code><span class="n">glLightModeli</span><span class="p">(</span><span class="n">GL_LIGHT_MODEL_TWO_SIDE</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// 开启双面照明。</span>

<span class="kt">float</span><span class="w"> </span><span class="n">purple</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">0.6</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<span class="kt">float</span><span class="w"> </span><span class="n">yellow</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">0.6</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>
<span class="kt">float</span><span class="w"> </span><span class="n">white</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span><span class="w"> </span><span class="c1">// 用于镜面高光。</span>
<span class="kt">float</span><span class="w"> </span><span class="n">black</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">};</span>

<span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL_FRONT</span><span class="p">,</span><span class="w"> </span><span class="n">GL_AMBIENT_AND_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">purple</span><span class="p">);</span><span class="w">  </span><span class="c1">// 前材质</span>
<span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL_FRONT</span><span class="p">,</span><span class="w"> </span><span class="n">GL_SPECULAR</span><span class="p">,</span><span class="w"> </span><span class="n">white</span><span class="p">);</span>
<span class="n">glMaterialf</span><span class="p">(</span><span class="n">GL_FRONT</span><span class="p">,</span><span class="w"> </span><span class="n">GL_SHININESS</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="p">);</span>

<span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_AMBIENT_AND_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">yellow</span><span class="p">);</span><span class="w">  </span><span class="c1">// 后材质</span>
<span class="n">glMaterialfv</span><span class="p">(</span><span class="n">GL_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_SPECULAR</span><span class="p">,</span><span class="w"> </span><span class="n">black</span><span class="p">);</span><span class="w">  </span><span class="c1">// 没有镜面高光</span>
</code></pre></div>
<p>这个小演示展示了这些材质在一个没有顶部的圆柱体上的外观，因此您可以在内表面看到后表面：</p>
<p><iframe src="../../../en/demos/c4/two-sided-lighting.html" width="380" height="450"></iframe></p>
<p>第三个材质属性，<em>GL_LIGHT_MODEL_LOCAL_VIEWER</em>，重要性小得多。它与照明方程中从表面到观察者的方向有关。默认情况下，这个方向总是直接指向屏幕外，这对于正交投影是正确的，但对于透视投影则不准确。如果您开启本地观察者选项，将使用真实的观察者方向。在实践中，差异通常不是很明显。</p>
</div>
<div class="tabbed-block">
<p>In addition to the properties of individual light sources, the <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> system uses several global properties. There are only three such properties in <abbr title="A family of computer graphics APIs that is implemented in many graphics hardware devices. There are several versions of the API, and there are implementations, or &quot;bindings&quot; for several different programming languages. Versions of OpenGL for embedded systems such as mobile phones are known as OpenGL ES. WebGL is a version for use on Web pages. OpenGL can be used for 2D as well as for 3D graphics, but it is most commonly associated with 3D.">OpenGL</abbr> 1.1. One of them is the global <abbr title="Directionless light that exists in an environment but does not seem to come from a particular source in the environment. An approximation for light that has been reflected so many times that its original source can't be identified. Ambient light illuminates all objects in a scene equally.">ambient light</abbr>, which is <abbr title="Directionless light that exists in an environment but does not seem to come from a particular source in the environment. An approximation for light that has been reflected so many times that its original source can't be identified. Ambient light illuminates all objects in a scene equally.">ambient light</abbr> that doesn't come from the <abbr title="A material property that represents the proportion of ambient light in the environment that is reflected by a surface.">ambient color</abbr> property of any light source. Global <abbr title="Directionless light that exists in an environment but does not seem to come from a particular source in the environment. An approximation for light that has been reflected so many times that its original source can't be identified. Ambient light illuminates all objects in a scene equally.">ambient light</abbr> will be present in the environment even if all of <em>GL_LIGHT0</em>, <em>GL_LIGHT1</em>, ... are disabled. By default, the global <abbr title="Directionless light that exists in an environment but does not seem to come from a particular source in the environment. An approximation for light that has been reflected so many times that its original source can't be identified. Ambient light illuminates all objects in a scene equally.">ambient light</abbr> is black (that is, its RGB components are all zero). The value can be changed using the function</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">glLightModelfv</span><span class="p">(</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="kt">float</span><span class="o">*</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>
<p>where the <em>property</em> must be <em>GL_LIGHT_MODEL_AMBIENT</em> and the value is an array containing four numbers giving the <abbr title="An RGB color—specified by red, green, and blue component values—together with an alpha component. The alpha component is most often take to specify the degree of transparency of the color, with a maximal alpha value giving a fully opaque color.">RGBA color</abbr> components of the global <abbr title="Directionless light that exists in an environment but does not seem to come from a particular source in the environment. An approximation for light that has been reflected so many times that its original source can't be identified. Ambient light illuminates all objects in a scene equally.">ambient light</abbr> as numbers in the range 0.0 to 1.0. In general, the global <abbr title="Directionless light that exists in an environment but does not seem to come from a particular source in the environment. An approximation for light that has been reflected so many times that its original source can't be identified. Ambient light illuminates all objects in a scene equally.">ambient light</abbr> level should be quite low. For example, in C:</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="w"> </span><span class="n">ambientLevel</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">0.15</span><span class="p">,</span><span class="w"> </span><span class="mf">0.15</span><span class="p">,</span><span class="w"> </span><span class="mf">0.15</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
<span class="n">glLightModelfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL_LIGHT_MODEL_AMBIENT</span><span class="p">,</span><span class="w"> </span><span class="n">ambientLevel</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
<p>The <abbr title="An extra component (that is, one of the numbers that are used to specify a color) in a color model that is not part of the actual color specification. The alpha component is extra information. It is most often used to specify the degree of transparency of a color.">alpha</abbr> component of the color is usually set to 1, but it is not used for anything. For <abbr title="OpenGL的Java实现。JOGL非常复杂，因为它试图在一个编程系统中支持所有版本的OpenGL。JOGL与Java的Swing和AWT图形无缝集成。">JOGL</abbr>, as usual, there is an extra parameter to specify the starting index of the data in the array, and the example becomes:</p>
<div class="highlight"><pre><span></span><code><span class="kt">float</span><span class="p">[]</span><span class="w"> </span><span class="n">ambientLevel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">0.15F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.15F</span><span class="p">,</span><span class="w"> </span><span class="mf">0.15F</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">};</span>
<span class="n">gl</span><span class="p">.</span><span class="n">glLightModelfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL2</span><span class="p">.</span><span class="n">GL_LIGHT_MODEL_AMBIENT</span><span class="p">,</span><span class="w"> </span><span class="n">ambientLevel</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">);</span>
</code></pre></div>
<p>The other two light model properties are options that can be either off or on. The properties are <em>GL_LIGHT_MODEL_TWO_SIDE</em> and <em>GL_LIGHT_MODEL_LOCAL_VIEWER</em>. They can be set using the function</p>
<div class="highlight"><pre><span></span><code><span class="kt">void</span><span class="w"> </span><span class="n">glLightModeli</span><span class="p">(</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">property</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="p">)</span>
</code></pre></div>
<p>with a value equal to 0 or 1 to indicate whether the option should be off or on. You can use the symbolic constants GL_FALSE and GL_TRUE for the value, but these are just names for 0 and 1.</p>
<p><em>GL_LIGHT_MODEL_TWO_SIDE</em> is used to turn on two-sided <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr>. Recall that a <abbr title="A multi-sided shape lying in a plane and specified by a list of points, called its vertices, and made up of the line segments from each point in the list to the next point in the list, plus a line segment from the last point in the list to the first point. All the points are required to lie in the same plane. Sometimes the term &quot;polygon&quot; includes the interior of the shape as well as its boundary.">polygon</abbr> can have two sets of <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> properties, a front <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> and a back <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr>. When two-sided <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> is off, which is the default, only the front <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> is used; it is used for both the <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the front, the vertices are enumerated in counterclockwise order around the polygon.">front face</abbr> and the <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the back, the vertices are enumerated in clockwise order around the polygon.">back face</abbr> of the <abbr title="A multi-sided shape lying in a plane and specified by a list of points, called its vertices, and made up of the line segments from each point in the list to the next point in the list, plus a line segment from the last point in the list to the first point. All the points are required to lie in the same plane. Sometimes the term &quot;polygon&quot; includes the interior of the shape as well as its boundary.">polygon</abbr>. Furthermore, the same <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> is used for both faces. Since those vectors point—or at least are supposed to point—out of the <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the front, the vertices are enumerated in counterclockwise order around the polygon.">front face</abbr>, they don't give the correct result for the <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the back, the vertices are enumerated in clockwise order around the polygon.">back face</abbr>. In effect, the <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the back, the vertices are enumerated in clockwise order around the polygon.">back face</abbr> looks like it is illuminated by light sources that lie in front of the <abbr title="A multi-sided shape lying in a plane and specified by a list of points, called its vertices, and made up of the line segments from each point in the list to the next point in the list, plus a line segment from the last point in the list to the first point. All the points are required to lie in the same plane. Sometimes the term &quot;polygon&quot; includes the interior of the shape as well as its boundary.">polygon</abbr>, but the <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the back, the vertices are enumerated in clockwise order around the polygon.">back face</abbr> should be illuminated by the lights that lie behind the <abbr title="A multi-sided shape lying in a plane and specified by a list of points, called its vertices, and made up of the line segments from each point in the list to the next point in the list, plus a line segment from the last point in the list to the first point. All the points are required to lie in the same plane. Sometimes the term &quot;polygon&quot; includes the interior of the shape as well as its boundary.">polygon</abbr>.</p>
<p>On the other hand, when two-sided <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> is on, the back <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> is used on the <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the back, the vertices are enumerated in clockwise order around the polygon.">back face</abbr> and the direction of the <abbr title="A normal vector to a surface at a point on that surface is a vector that is perpendicular to the surface at that point. Normal vectors to curves are defined similarly. Normal vectors are important for lighting calculations.">normal vector</abbr> is reversed when it is used in <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> calculations for the <abbr title="One of the two sides of a polygon in 3D. A polygon has two sides. One is taken to be the front face, and the other is the back face. In OpenGL, the difference is determined by the order in which the vertices of the polygon are enumerated. The default is that, seen from the back, the vertices are enumerated in clockwise order around the polygon.">back face</abbr>.</p>
<p>You should use two-sided <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> whenever there are back faces that might be visible in your scene. (This will not be the case when your scene consists of "solid" objects, where the back faces are hidden inside the solid.) With two-sided <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr>, you have the option of using the same <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> on both faces or specifying different materials for the two faces. For example, to put a shiny purple <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> on front faces and a duller yellow <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> on back faces:</p>
<div class="highlight"><pre><span></span><code><span class="n">glLightModeli</span><span class="p">(</span><span class="w"> </span><span class="n">GL_LIGHT_MODEL_TWO_SIDE</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">);</span><span class="w"> </span><span class="c1">// Turn on two-sided lighting.</span>

<span class="kt">float</span><span class="w"> </span><span class="n">purple</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">0.6</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
<span class="kt">float</span><span class="w"> </span><span class="n">yellow</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">0.6</span><span class="p">,</span><span class="w"> </span><span class="mf">0.6</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>
<span class="kt">float</span><span class="w"> </span><span class="n">white</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mf">0.4</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span><span class="w"> </span><span class="c1">// For specular highlights.</span>
<span class="kt">float</span><span class="w"> </span><span class="n">black</span><span class="p">[]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="p">};</span>


<span class="n">glMaterialfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL_FRONT</span><span class="p">,</span><span class="w"> </span><span class="n">GL_AMBIENT_AND_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">purple</span><span class="w"> </span><span class="p">);</span><span class="w">  </span><span class="c1">// front material</span>
<span class="n">glMaterialfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL_FRONT</span><span class="p">,</span><span class="w"> </span><span class="n">GL_SPECULAR</span><span class="p">,</span><span class="w"> </span><span class="n">white</span><span class="w"> </span><span class="p">);</span>
<span class="n">glMaterialf</span><span class="p">(</span><span class="w"> </span><span class="n">GL_FRONT</span><span class="p">,</span><span class="w"> </span><span class="n">GL_SHININESS</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="w"> </span><span class="p">);</span>

<span class="n">glMaterialfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_AMBIENT_AND_DIFFUSE</span><span class="p">,</span><span class="w"> </span><span class="n">yellow</span><span class="w"> </span><span class="p">);</span><span class="w">  </span><span class="c1">// back material</span>
<span class="n">glMaterialfv</span><span class="p">(</span><span class="w"> </span><span class="n">GL_BACK</span><span class="p">,</span><span class="w"> </span><span class="n">GL_SPECULAR</span><span class="p">,</span><span class="w"> </span><span class="n">black</span><span class="w"> </span><span class="p">);</span><span class="w">  </span><span class="c1">// no specular highlights</span>
</code></pre></div>
<p>This little demo shows what these materials look like on a cylinder that has no top, so that you can see the back faces on the inside surface:</p>
<p><iframe src="../../../en/demos/c4/two-sided-lighting.html" width="380" height="450"></iframe></p>
<p>The third <abbr title="The properties of an object that determine how that object interacts with light in the environment. Material properties in OpenGL include, for example, diffuse color, specular color, and shininess.">material</abbr> property, <em>GL_LIGHT_MODEL_LOCAL_VIEWER</em>, is much less important. It has to do with the direction from a surface to the viewer in the <abbr title="Using light sources in a 3D scene, so that the appearance of objects in the scene can be computed based on the interaction of light with the objects' material properties.">lighting</abbr> equation. By default, this direction is always taken to point directly out of the screen, which is true for an <abbr title="A projection from 3D to 2D that simply discards the z-coordinate. It projects objects along lines that are orthogonal (perpendicular) to the xy-plane. In OpenGL 1.1, the view volume for an orthographic projection is a rectangular solid.">orthographic projection</abbr> but is not accurate for a <abbr title="A projection from 3D to 2D that projects objects along lines radiating out from a viewpoint. A perspective projection attempts to simulate realistic viewing. A perspective projection preserves perspective; that is, objects that are farther from the viewpoint are smaller in the projection. In OpenGL 1.1, the view volume for a perspective projection is a frustum, or truncated pyramid.">perspective projection</abbr>. If you turn on the local viewer option, the true direction to the viewer is used. In practice, the difference is usually not very noticeable.</p>
</div>
</div>
</div>
<p>*[纹理单元]：GPU中的一个硬件组件，用于进行纹理查找。（也可以指代这样一个组件的抽象，无论它是否实际在硬件中实现。）也就是说，它将纹理坐标映射到图像纹理的颜色上。这个操作被称为“采样”，纹理单元与GLSL着色器程序中的采样器变量相关联。</p>
<p>*[<abbr title="Texture Mapping Unit, another name for texture unit (perhaps with a stronger implication of actual hardware support). Also called a TPU (Texture Processing Unit).">TMU</abbr>]：纹理映射单元，纹理单元的另一个名称（可能更强调实际的硬件支持）。也称为TPU（纹理处理单元）。</p>
<p>*[采样]：将纹理坐标映射到纹理的颜色上的操作，包括如果可用则使用mipmap，并且在必要时应用缩放或放大滤波器。</p>
<p>*[采样器变量]：在GLSL中，着色器程序中的一个变量，可以用来在图像纹理中进行查找。采样器变量的值指定了将用于进行查找的纹理单元。在WebGL中，采样器变量的类型为“sampler2D”或“samplerCube”。</p>
<p>*[<abbr title="A new JavaScript graphics API, similar to WebGL, but designed to let web programs access modern GPU capabilities such as compute shaders.">WebGPU</abbr>]：一种新的JavaScript图形API，类似于WebGL，但设计上允许Web程序访问现代GPU功能，如计算着色器。</p>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="最后更新">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1-2.1-2M12.5 7v5.2l4 2.4-1 1L11 13V7h1.5M11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2v1.8Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年6月8日</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="创建日期">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3h-2Z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-date">2024年5月26日</span>
  </span>

    
    
    
  </aside>





                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var tab,labels=set.querySelector(".tabbed-labels");for(tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12Z"/></svg>
  回到页面顶部
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy", "content.tabs.link", "navigation.tabs", "navigation.tabs.sticky", "navigation.indexes", "navigation.top", "toc.follow", "content.tooltips"], "search": "../../../assets/javascripts/workers/search.b8dbb3d2.min.js", "translations": {"clipboard.copied": "\u5df2\u590d\u5236", "clipboard.copy": "\u590d\u5236", "search.result.more.one": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.more.other": "\u5728\u8be5\u9875\u4e0a\u8fd8\u6709 # \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.none": "\u6ca1\u6709\u627e\u5230\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.one": "\u627e\u5230 1 \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.other": "# \u4e2a\u7b26\u5408\u6761\u4ef6\u7684\u7ed3\u679c", "search.result.placeholder": "\u952e\u5165\u4ee5\u5f00\u59cb\u641c\u7d22", "search.result.term.missing": "\u7f3a\u5c11", "select.version": "\u9009\u62e9\u5f53\u524d\u7248\u672c"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.3220b9d7.min.js"></script>
      
        <script src="../../../javascripts/mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
        <script src="https://unpkg.com/mermaid@9.4.0/dist/mermaid.min.js"></script>
      
    
  <script>document$.subscribe(() => {const lightbox = GLightbox({"touchNavigation": true, "loop": false, "zoomable": true, "draggable": true, "openEffect": "zoom", "closeEffect": "zoom", "slideEffect": "slide"});})</script></body>
</html>